FROM node:fermium-alpine@sha256:49d052af1616dbf5f2bd8b71fca9a4b7c688955e72bbe3e0126c4b28d7675577

VOLUME ["/web/node_modules"]

VOLUME ["/web"]

WORKDIR /web

RUN apk add --no-cache --virtual .gyp \
        python \
        make \
        g++ \
        curl

CMD ["sh", "-c", "npm ci ; npm run release:build-serve"]